(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))s(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function c(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(t){if(t.ep)return;t.ep=!0;const r=c(t);fetch(t.href,r)}})();function a(e,n={}){return Object.assign(document.createElement(e),n)}function x({videoWidth:e,videoHeight:n},c,s){return e>n?{width:s,height:s/c}:{width:s/c,height:s}}function T({loaded:e,total:n}){return`${Math.round(e*100/n)}% - ${e} de ${n}`}function d(e,n=document.body){return n.querySelector(e)}function g({width:e,height:n,thumbnails:c}){const s=e*c.length,t=a("canvas",{width:s,height:n}),r=t.getContext("2d");return r&&c.forEach((o,u)=>{const i=new Image;i.src=o,i.onload=()=>{r.drawImage(i,u*e,0)}}),t}function y(e,n,c,s){return new Promise((t,r)=>{const o=a("video",{src:e});o.onerror=r;const u=[];o.onloadeddata=()=>{const i=Math.round(o.duration),f=i/10<1?1:i/10,{width:l,height:p}=x(o,n,c);o.ontimeupdate=()=>{const m=a("canvas",{width:l,height:p});if(m.getContext("2d").drawImage(o,0,0,l,p),o.currentTime<o.duration){const h=m.toDataURL();u.push(h),o.currentTime+=f;const P=Math.round(o.currentTime);s({thumbnail:h,loaded:P,total:i})}else t({width:l,height:p,thumbnails:u})},o.currentTime+=f}})}const v=320,w=16/9,b=d("main"),I=d("output",b),L=e=>{I.innerText=T(e)},O=a("input",{type:"file",accept:"video/mp4,video/mpeg",onchange(){const[e]=Array.from(O.files??[]),n=URL.createObjectURL(e);y(n,w,v,L).then(g).then(c=>{d("div.timeline").append(c)})}});b.appendChild(O);const M=["web-standards-for-the-future.mp4"];M.map(e=>{document.body.append(a("button",{innerText:e,onclick(){y(e,w,v,L).then(g).then(n=>{d("div.timeline").append(n)})}}))});
