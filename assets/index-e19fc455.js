(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const r of t)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&c(o)}).observe(document,{childList:!0,subtree:!0});function i(t){const r={};return t.integrity&&(r.integrity=t.integrity),t.referrerPolicy&&(r.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?r.credentials="include":t.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function c(t){if(t.ep)return;t.ep=!0;const r=i(t);fetch(t.href,r)}})();function a(e,n={}){return Object.assign(document.createElement(e),n)}function T({videoWidth:e,videoHeight:n},i,c){return e>n?{width:c,height:c/i}:{width:c/i,height:c}}function E({loaded:e,total:n}){return`${Math.round(e*100/n)}% - ${e} de ${n}`}function d(e,n=document.body){return n.querySelector(e)}function m({width:e,height:n,thumbnails:i}){const c=e*i.length,t=a("canvas",{width:c,height:n}),r=t.getContext("2d");return r&&i.forEach((o,l)=>{const s=new Image;s.src=o,s.onload=()=>{r.drawImage(s,l*e,0)}}),t}function h(e,n,i,c=()=>{}){return new Promise((t,r)=>{const o=a("video",{src:e,crossOrigin:"anonymous"});o.onerror=r;const l=[];o.onloadeddata=()=>{const s=Math.round(o.duration),b=s/10<1?1:s/10,{width:p,height:f}=T(o,n,i);o.ontimeupdate=()=>{const L=a("canvas",{width:p,height:f});if(L.getContext("2d").drawImage(o,0,0,p,f),o.currentTime<o.duration){const O=L.toDataURL();l.push(O),o.currentTime+=b;const x=Math.round(o.currentTime);c({thumbnail:O,loaded:x,total:s})}else t({width:p,height:f,thumbnails:l})},o.currentTime+=b}})}const g=320,v=16/9,P=d("main"),I=d("output",P),y=e=>{I.innerText=E(e)},u={file:a("input",{type:"file",accept:"video/mp4,video/mpeg",onchange(){const[e]=Array.from(u.file.files??[]),n=URL.createObjectURL(e);h(n,v,g,y).then(m).then(i=>{d("div.timeline").append(i),u.file.value=""})}}),url:a("input",{type:"url",pattern:"^.*.(mp4)$",placeholder:"Ex.: https://website.com/some-video.mp4",oninput(){u.url.validity.valid&&h(u.url.value,v,g,y).then(m).then(e=>{d("div.timeline").append(e),u.url.value=""})}})},w=a("fieldset");w.append(...Object.values(u));const M=["web-standards-for-the-future.mp4"];M.map(e=>{w.append(a("button",{innerText:e,onclick(){h(e,v,g,y).then(m).then(n=>d("div.timeline").append(n))}}))});P.append(w);
